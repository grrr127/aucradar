{% extends "core/base.html" %}
{% load humanize %} {% block title %}AucRadar | ê´€ì‹¬ ë¬¼ê±´{% endblock %}

{% block extra_head %}
<style>
  /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
  .section{margin-top:18px}
  .hero{margin-top:18px;display:grid;grid-template-columns:1.1fr .9fr;gap:16px;}
  .muted{color:var(--muted)}
  .top h1{margin:0;font-size:28px;letter-spacing:-.3px}
  .top p{margin:8px 0 0;line-height:1.6;color:var(--muted)}
  .filters{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;}
  .pillinput{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background: rgba(255,255,255,.03);font-size:13px;}
  .pillinput input, .pillinput select{background:transparent;border:0;color:var(--text);outline:none;font-size:13px; min-width:120px;}
  .list{display:grid;gap:10px}
  .item{padding:14px;border-radius:16px;border:1px solid var(--line);background: rgba(255,255,255,.03);}
  .item .head{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-start;}
  .item .name{font-weight:900}
  .badge{display:inline-flex;align-items:center;gap:8px;padding:7px 10px;border-radius:999px;border:1px solid var(--line);background: rgba(255,255,255,.03);color: var(--muted); font-size:12px; white-space:nowrap;}
  .badge.ok{border-color:rgba(103,240,200,.25);background:rgba(103,240,200,.08);color:#67f0c8;}
  .badge.warn{border-color:rgba(255,107,107,.25);background:rgba(255,107,107,.08);color:#ff6b6b;}
  .meta{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.6}
  .actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
  .actions a{font-size:13px}
  .side{padding:16px;border-radius:18px;border:1px solid var(--line);background: rgba(15,23,48,.55);backdrop-filter: blur(10px);}
  .side .title{margin:0 0 10px;font-weight:900;font-size:16px}
  .side p{margin:0;color:var(--muted);font-size:14px;line-height:1.6}
  .empty{padding:14px;border-radius:14px;border:1px dashed rgba(255,255,255,.18);background: rgba(255,255,255,.02);color: var(--muted);font-size:14px;line-height:1.6;}
  @media (max-width:900px){.hero{grid-template-columns:1fr}}
</style>
{% endblock %}

{% block content %}
<div class="search-bar" style="margin-bottom: 24px;">
  <form method="get" style="display: flex; gap: 8px;">
    <input type="text" name="q" value="{{ query }}" placeholder="ì§€ì—­ìœ¼ë¡œ ê²€ìƒ‰ (ì˜ˆ: ì„œìš¸, ê°•ë‚¨)"
           style="flex: 1; padding: 12px; border-radius: 8px; border: 1px solid var(--line); background: rgba(255,255,255,0.05); color: var(--text);">
    <button type="submit" class="btn primary">ê²€ìƒ‰</button>
  </form>
</div>
<section class="hero">
  <div class="card">
    <div class="top">
      <h1>ê´€ì‹¬ ë¬¼ê±´</h1>
      <p>ì¶”ì  ì¤‘ì¸ ê²½Â·ê³µë§¤ ì‚¬ê±´ ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ìƒíƒœ ë³€ë™ì„ í™•ì¸í•˜ì„¸ìš”.</p>
    </div>

    <div class="filters">
      <div class="pillinput">
        <span>ê²€ìƒ‰</span>
        <input type="text" name="q" placeholder="ì‚¬ê±´ë²ˆí˜¸, ë¬¼ê±´ëª… ê²€ìƒ‰" value="{{ request.GET.q }}">
      </div>
      <a class="btn primary" href="#">ë¬¼ê±´ ì¶”ê°€</a>
    </div>

    <div class="section">
      <div class="list">
        {% for item in items %}
        <div class="item">
          <div class="head">
            <div>
              <div class="name">[{{ item.get_source_display }}] {{ item.title }}</div>
              <div class="muted" style="font-size:13px;">
                {{ item.large.name|default:"ë¶„ë¥˜ë¯¸ì •" }} Â· {{ item.area|default:"-" }}ã¡ Â· ê°ì •ê°€ {{ item.appraisal_price|intcomma }}ì›
              </div>
            </div>
            <span class="badge {% if item.status == 'active' %}ok{% else %}warn{% endif %}">
              {{ item.get_status_display }}
            </span>
          </div>
          <div class="meta">
            ğŸ“ ì†Œì¬ì§€: {{ item.location }}<br/>
            ğŸ’° <b>ìµœì €ê°€: {{ item.min_bid_price|intcomma }}ì›</b> (ìœ ì°° {{ item.num_failures }}íšŒ)<br/>
            ğŸ“… ì…ì°°ì¼: {{ item.auction_date|date:"Y-m-d"|default:"ë¯¸ì •" }}
          </div>
          <div class="actions">
            <a class="btn small" href="{{ item.detail_url }}" target="_blank">ì›ë¬¸ ë³´ê¸°</a>
            <a class="btn small" href="#">ì•Œë¦¼ ì„¤ì •</a>
            <form action="#" method="post" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn small" style="color:var(--danger); background:none; border:none; cursor:pointer;">ì‚­ì œ</button>
            </form>
          </div>
        </div>
        {% empty %}
        <div class="empty">
          ì•„ì§ ë“±ë¡ëœ ë¬¼ê±´ì´ ì—†ìŠµë‹ˆë‹¤.<br/>
          ìƒë‹¨ì˜ â€œë¬¼ê±´ ì¶”ê°€â€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ì ì„ ì‹œì‘í•´ ë³´ì„¸ìš”.
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="side">
    <p class="title">TIP</p>
    <p>
      1) ì‚¬ê±´ë²ˆí˜¸ë§Œ ì•Œì•„ë„ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br/>
      2) ë³€ë™ ì•Œë¦¼ì„ ì¼œë©´ ì¤‘ìš”í•œ ì´ë²¤íŠ¸ë§Œ í‘¸ì‹œë©ë‹ˆë‹¤.<br/>
      3) ìš´ì˜ìê°€ ìˆ˜ì§‘/ê°±ì‹  ì •í™•ë„ë¥¼ ê³„ì† ê°œì„  ì¤‘ì…ë‹ˆë‹¤.
    </p>

    <div class="section">
      <p class="title" style="margin-bottom:8px;">ë¹ ë¥¸ ì´ë™</p>
      <div class="actions" style="margin-top:6px;">
        <a class="btn small" href="{% url 'core:dashboard' %}">ëŒ€ì‹œë³´ë“œ</a>
        <a class="btn small" href="{% url 'core:alerts' %}">ì•Œë¦¼ ì„¤ì •</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}